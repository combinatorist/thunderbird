From: Carsten Schoenert <c.schoenert@t-online.de>
Date: Fri, 21 Sep 2018 09:14:19 +0200
Subject: Bug 1482248 - don't crash on empty file name in
 nsMsgLocalStoreUtils::nsShouldIgnoreFile. r=jorgk a=jorgk

Origin: https://hg.mozilla.org/releases/comm-esr60/rev/7802e1dbc3f26a0ddcb5efa14dfce919f3b7ea21
Bug-Debian: https://bugs.debian.org/909039
Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1482248
Applied-Upstream: yes
---
 comm/mailnews/local/src/nsMsgLocalStoreUtils.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/comm/mailnews/local/src/nsMsgLocalStoreUtils.cpp b/comm/mailnews/local/src/nsMsgLocalStoreUtils.cpp
index 10123d7..8289e25 100644
--- a/comm/mailnews/local/src/nsMsgLocalStoreUtils.cpp
+++ b/comm/mailnews/local/src/nsMsgLocalStoreUtils.cpp
@@ -28,6 +28,9 @@ nsMsgLocalStoreUtils::AddDirectorySeparator(nsIFile *path)
 bool
 nsMsgLocalStoreUtils::nsShouldIgnoreFile(nsAString& name)
 {
+  if (name.IsEmpty())
+    return true;
+
   char16_t firstChar = name.First();
   if (firstChar == '.' || firstChar == '#' ||
       name.CharAt(name.Length() - 1) == '~')
