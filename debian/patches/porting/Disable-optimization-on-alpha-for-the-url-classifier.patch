From: Mike Hommey <glandium@debian.org>
Date: Sun, 2 Nov 2008 17:56:24 +0100
Subject: Disable optimization on alpha for the url-classifier component

The use of this component leads to crashes when built with optimizations.
---
 mozilla/mobile/android/stumbler/Makefile.in | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/mozilla/mobile/android/stumbler/Makefile.in b/mozilla/mobile/android/stumbler/Makefile.in
index 958d503..32e267b 100644
--- a/mozilla/mobile/android/stumbler/Makefile.in
+++ b/mozilla/mobile/android/stumbler/Makefile.in
@@ -3,7 +3,17 @@
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 include $(topsrcdir)/config/rules.mk
-
 include $(topsrcdir)/config/android-common.mk
 
 libs:: stumbler.jar
+include $(topsrcdir)/testing/testsuite-targets.mk
+
+ABS_SRCDIR := $(abspath $(srcdir))
+
+CXXFLAGS += \
+  $(SQLITE_CFLAGS) \
+  $(NULL)
+
+ifeq ($(OS_TEST),alpha)
+MOZ_OPTIMIZE_FLAGS := -O0
+endif
